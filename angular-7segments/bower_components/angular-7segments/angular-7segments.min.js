/**
 * @name angular-7segments
 * @version v0.0.1
 * @author Taewoo Kim xodn4195@gmail.com
 * @license MIT
 */
!function(e,t){function n(e){return e&&e.$evalAsync&&e.$watch}function i(e){return e&&e.window===e}function r(e,t){var r=t;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?r=void 0:i(t)?r="$WINDOW":t&&document===t?r="$DOCUMENT":n(t)&&(r="$SCOPE"),r}function s(e){var n=[];return JSON.stringify(e,function(e,i){if(i=r(e,i),t.isObject(i)){if(n.indexOf(i)>=0)return"...";n.push(i)}return i})}function o(e){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):t.isUndefined(e)?"undefined":"string"!=typeof e?s(e):e}function a(e,t){return t=t||Error,function(){var n=2,i=arguments,r=i[0],s="["+(e?e+":":"")+r+"] ",a=i[1];return s+=a.replace(/\{\d+\}/g,function(e){var t=+e.slice(1,-1),r=t+n;return r<i.length?o(i[r]):e}),new t(s)}}function g(e){var t={strict:"E",require:"^ngModel",scope:{segVal:"=ngModel",segDigitOptions:"="},templateUrl:"digit.html",link:function(e,t,n,i){e.opt=e.segDigitOptions||(e.segDigitOptions={}),e.opt.onName=e.opt.onName||"seven-seg-on",e.opt.digitName=e.opt.digitName||"seven-seg-digit"}};return t}function l(e){var t={strict:"E",require:"^ngModel",scope:{segOptions:"=",segArr:"=ngModel"},templateUrl:"group.html",link:function(t){function n(n,i){try{t.digits=e.arrToSegGroup(n,i)}catch(r){t.digits=[]}}var i=t.segOptions||(t.segOptions={});t.wrapperStyle={width:(i.width||75)+"px",height:(i.height||150)+"px"},t.$watch("segArr",function(e){n(e,i)});var r=t.$watchCollection("segOptions",function(e){n(t.segArr,e),e.watch||r()})}};return t}function u(){return function(e,t){return e&t}}function p(e){var n=this;this.isDot=function(t){return"."===t||t===e["."]},this.arrToSegGroup=function(i,r){if(!t.isArray(i)&&!t.isString(i))throw new c("badarrtype","The type '{0}' is not supported.",typeof i);if(r.size<0)throw new c("badsize","The size '{0}' cannot be negative.",r.size);for(var s=[],o=0,a=void 0===r.size?i.length:r.size,g=0,l=i.length;l>g&&a>o;o++,g++){var u=i[g]||0;if(n.isDot(u)){var p=i[g-1];void 0===p||n.isDot(p)?s[o]=e["."]:s[--o]|=e["."]}else if(t.isString(u))s[o]=e[u];else{if(!t.isNumber(u))throw new c("baditemtype","The type '{0}' is not supported.",typeof u);s[o]=u}}return n.isDot(i[g])&&(s[o-1]|=e["."]),a=void 0===r.size?o:r.size,void 0===r.align||"right"===r.align?new Array(a-o).concat(s):s.concat(new Array(a-o))},this.arrToSegNum=function(e){if(!t.isArray(e)&&!t.isString(e))throw new c("badarrtype","The type '{0}' is not supported.",typeof e);for(var n=1,i=0,r=0,s=8;s>r;n<<=1,r++)e[r]&&"0"!=e[r]&&(i+=n);return i},this.segNumToArr=function(e,t){var n=1;e=e||0;for(var i=void 0==t?e:e^t,r=[],s=0;8>s;n<<=1,s++)n&i&&(r[s]=!!(n&e));return r}}g.$inject=["segUtil"];a("segGroup");l.$inject=["segUtil"];var d={1:6,2:91,3:79,4:102,5:109,6:125,7:39,8:127,9:111,0:63,"-":64,_:8,".":128," ":0,S:109,E:121,G:61},c=a("segutil");p.$inject=["segMap"];t.module("wo.7segments",[]).directive("segDigit",g).directive("segGroup",l).value("segMap",d).service("segUtil",p).filter("bitAnd",u).run(["$document",function(e){var t=e[0].querySelector("head"),n=e[0].createElement("style");n.innerHTML=".seven-seg-digit{ fill: #320000; overflow: hidden;stroke-width: 0; height: 100%; width: 100%; background-color: Black;}.seven-seg-on{fill:red;}.seven-seg-digit-wrapper{display:inline-block;}",t.appendChild(n)}]);t.module("wo.7segments").run(["$templateCache",function(e){e.put("digit.html",'<svg data-ng-class="opt.digitName" viewBox="0 0 57 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" focusable="false"> <defs> <polyline id="h-part" points="11 0, 37 0, 42 5, 37 10, 11 10, 6 5"></polyline> <polyline id="v-part" points="0 11, 5 6, 10 11, 10 34, 5 39, 0 34"></polyline> </defs> <g class="seven-seg-group"> <use xlink:href="#h-part" x="0" y="0" data-ng-class="(segVal | bitAnd : 1) && opt.onName"></use> <use xlink:href="#v-part" x="-48" y="0" transform="scale(-1,1)" data-ng-class="(segVal | bitAnd : 2)  && opt.onName"></use> <use xlink:href="#v-part" x="-48" y="-80" transform="scale(-1,-1)" data-ng-class="(segVal | bitAnd : 4) && opt.onName"></use> <use xlink:href="#h-part" x="0" y="70" data-ng-class="(segVal | bitAnd : 8) && opt.onName"></use> <use xlink:href="#v-part" x="0" y="-80" transform="scale(1,-1)" data-ng-class="(segVal | bitAnd : 16) && opt.onName"></use> <use xlink:href="#v-part" x="0" y="0" data-ng-class="(segVal | bitAnd : 32) && opt.onName"></use> <use xlink:href="#h-part" x="0" y="35" data-ng-class="(segVal | bitAnd : 64) && opt.onName"></use> <circle cx="52" cy="75" r="5" data-ng-class="(segVal | bitAnd : 128) && opt.onName"></circle> </g> </svg>'),e.put("group.html",'<div class="seven-seg-digit-wrapper" data-ng-style="wrapperStyle" data-ng-repeat="dig in digits track by $index" seg-digit data-ng-model="dig"></div>')}])}(window,window.angular);